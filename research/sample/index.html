<!doctype html public "-//w3c//dtd html 4.01//en" "http://www.w3.org/tr/html4/strict.dtd">
<html>
  <head>
    <title>pure javascript nsf-player</title>
    <!--<script type="text/javascript" src="../../tmp/build/a.out.js"></script>-->
    <!--<script type="text/javascript" src="libgme.js"></script>-->
    <script src="../../tmp/gmemu.js"></script>
    <script src="http://code.jquery.com/jquery-2.1.0.js"></script>
    <!--<script type="text/javascript" src="player.js"></script>-->
    <script type="text/javascript">
        $(window).ready(function () {
            //gmemujs.init();
            var xhr = new XMLHttpRequest();
            xhr.open("GET", 'nsf/megaman2.nsf', true);
            xhr.responseType = "arraybuffer";
            xhr.onload = function(e) {
              var payload = new Uint8Array(this.response);
              var file = gmemujs.read(payload);
              var track = file.track(9);
              console.log(track.info());
              console.log('start');
              track.play();
            };
            xhr.send();
        });
    </script>
  </head>
  <body style="font-family: arial; font-size: 12px;">
    Ok.. so crazy hack.. cross-compiled the C++ <a href="https://code.google.com/p/game-music-emu/">game-music-emu</a> project<br/>
    to javascript with <a href="https://github.com/kripken/emscripten">emscripten</a>, wrote a tiny player using the library<br/>
    together with <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html">Web Audio API</a>.. and it just worked&lt;tm&gt;...<br/>
    <br/>
    Only works in browsers with the Web Audio API available (at least Chrome).<br/>
    <br/>
    Source: <a href="player.js">player.js</a><br/>
    <br/>
    <div id="metadata"></div>
    <br/>
    Files:<br/>
    <div id="filelist"></div>
  </body>
</html>